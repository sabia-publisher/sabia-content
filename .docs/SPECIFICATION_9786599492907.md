# Guia de Estrutura de Ebooks - Editora Sabiá

**Documento de Referência para Conversão de Livros**  
**Versão:** 1.0  
**Objetivo:** Padronizar a estrutura de ebooks para renderização via Nuxt 4 + Paginar  
**Audiência:** LLMs, Agents, Desenvolvedores, Editores  

---

## 1. Visão Geral da Estrutura

Todos os ebooks da Editora Sabiá seguem um padrão padronizado para renderização web interativa:

- **Framework:** Nuxt 4 com Nuxt Content v3
- **Formato de Conteúdo:** Markdown com sintaxe MDC (Markdown Components)
- **Renderização:** Single Page Application (SPA) com pré-renderização estática (SSG)
- **Leitor:** Web Component Paginar (CDN externo)
- **Integração:** Footnotes (notas de rodapé), Referências e Temas customizáveis

Este guia serve como referência para estruturar qualquer novo livro seguindo o mesmo padrão.

---

## 2. Estrutura de Diretórios - Template Padrão

### 2.1 Template de Estrutura de Livro

```
content/{ISBN}/
├── .settings/              # Configurações do livro (obrigatório)
│   ├── index.js           # Exporta configuração consolidada
│   ├── config.js          # Configuração principal
│   ├── theme.js           # Tema CSS para Paginar
│   ├── fonts.js           # Opções de fontes disponíveis
│   ├── footnotes.js       # Banco de dados de notas de rodapé
│   └── references.js      # Banco de dados de referências bibliográficas
│
├── css/                    # Estilos específicos do livro (opcional)
│   └── base.css           # CSS customizado (carregado via <link>)
│
├── 0.cover.md             # Página de capa (sempre primeiro)
├── 1.[slug].md            # Capítulos numerados
├── 2.[slug].md
├── N.referencias.md       # Referências (sempre último)
│
└── (public assets no /public/{ISBN}/)
```

**Exemplo Real - 9786599492907:**
```
9786599492907/
├── .settings/
├── css/
├── 0.cover.md
├── 1.prefacio.md
├── 2.carta-a-primeira-edicao.md
├── 3.mas-afinal.md
├── 4.estudos-decoloniais.md
├── 5.estudos-culturais.md
├── 6.design-decolonial.md
├── 7.consideracoes-finais.md
└── 8.referencias.md
```

**Exemplo Real - 9786599492938:**
```
9786599492938/
├── .settings/
├── 0.cover.md
├── 1.gratitudes.md
├── 2.preface.md
├── 3.introduction.md
├── 4.part-a.md
├── 5.part-b.md
├── 6.part-c.md
└── 7.references.md
```

### 2.2 Convenções de Nomeação

| Elemento | Padrão | Exemplo | Notas |
|----------|--------|---------|-------|
| **Diretório** | `{ISBN}` | `9786599492907` | Use ISBN sem formatação |
| **Arquivo de Capítulo** | `{N}.{slug}.md` | `1.prefacio.md` | Numeração começa em 0 (capa) |
| **Slug** | lowercase + hífens | `carta-a-primeira-edicao.md` | Sem acentos, espaços como hífens |
| **Ordem** | Numérica (0-N) | `0.cover`, `1.prefacio`, ..., `N.referencias` | Garante ordem de navegação |
| **Settings** | Nome da função | `config.js`, `theme.js` | Sempre em `.settings/` |

**Importante:** A numeração é essencial para que Nuxt Content descubra os arquivos em ordem correta.

### 2.3 Diretório de Configurações: `.settings/` - Arquivo Obrigatório

```
.settings/
├── index.js               # Exporta configuração consolidada (obrigatório)
├── config.js              # Configuração principal (obrigatório)
├── theme.js               # Tema e CSS (obrigatório)
├── fonts.js               # Opções de fontes (obrigatório)
├── footnotes.js           # Notas de rodapé (pode estar vazio)
└── references.js          # Referências bibliográficas (pode estar vazio)
```

**Todos os 6 arquivos devem estar presentes.** Se não há notas ou referências, os arquivos devem existir mas podem ser vazios (export default []).

### 2.4 Diretório de Estilos: `css/` - Arquivo Opcional

```
css/
└── base.css         # [OPCIONAL] Estilos adicionais do livro
                     # Carregado via <link> nas páginas Markdown
```

**Nota:** Este arquivo é completamente opcional. Se não há estilos customizados, o diretório não precisa existir. O CSS do tema deve estar em `.settings/theme.js` (para Paginar Shadow DOM).

## 3. Arquivos Markdown - Especificação Padrão

### 3.1 Front Matter YAML - Obrigatório em Todos os Arquivos

**Template:**
```yaml
---
title: '[TÍTULO DO LIVRO] - [TÍTULO DO CAPÍTULO]'
description: '[Descrição breve do conteúdo]'
layout: 'default'
navigation:
  title: '[Texto exibido no índice]'
---
```

**Campos Obrigatórios:**
- `title`: Título completo (aparece em meta tags, é importante para SEO)
- `description`: Descrição concisa
- `layout`: Sempre `'default'` (não mude)
- `navigation.title`: Texto curto que aparece no menu do livro

**Exemplos:**

De 9786599492907 (Português):
```yaml
---
title: 'Uma perspectiva decolonial para o design no Brasil - Prefácio'
description: 'Prefácio do livro sobre design decolonial'
layout: 'default'
navigation:
  title: 'Prefácio'
---
```

De 9786599492938 (Inglês):
```yaml
---
title: 'Book Title - Introduction'
description: 'Introduction to the book'
layout: 'default'
navigation:
  title: 'Introduction'
---
```

### 3.2 Link de CSS (Recomendado)

Logo após o front matter YAML, inclua:

```html
<link rel="stylesheet" href="/{ISBN}/css/base.css">
```

**Notas:**
- Substitua `{ISBN}` pelo ISBN real (ex: `/9786599492907/css/base.css`)
- Se não houver CSS customizado, este link pode ser omitido
- Este CSS é para estilos fora do Paginar Web Component

### 3.3 Sintaxe de Conteúdo - Markdown Padrão + MDC

**Markdown Padrão:** Use sintaxe Markdown normal
```markdown
# Título
## Subtítulo
**Negrito**
*Itálico*
[Link](https://example.com)
```

**Componentes Vue (MDC):**
```mdc
::ComponentName{.classe-tailwind prop="valor"}
Conteúdo aqui (slot padrão)
::
```

**Exemplo Prático:**
```mdc
::PageFull{.flex .flex-col .justify-center}

# TÍTULO GRANDE

## Subtítulo

Parágrafo de conteúdo...

::
```

---

## 4. Sistema de Notas de Rodapé (Footnotes)

### 4.1 Arquivo de Configuração: `.settings/footnotes.js`

**Estrutura:**
```javascript
export default [
    {
        "id": "footnote1",
        "text": "Conteúdo da primeira nota de rodapé"
    },
    {
        "id": "footnote2",
        "text": "Conteúdo da segunda nota. Pode incluir <strong>HTML</strong>"
    },
    {
        "id": "footnote3",
        "text": "Conteúdo da terceira nota"
    }
]
```

**Regras:**
- Cada objeto tem `id` e `text`
- `id` deve ser `footnote{número}` (footnote1, footnote2, etc.)
- `text` pode conter HTML simples (tags como `<em>`, `<strong>`, `<a>`)
- Se não há notas, o arquivo pode estar vazio: `export default []`

### 4.2 Marcação no Markdown

Use sintaxe de classe CSS para ligar notas de rodapé:

```markdown
Este é um trecho de texto[com uma nota]{.footnote .footnote1} que será processada.
```

**Sintaxe:** `[texto]{.footnote .footnoteN}`

- `.footnote` = marca como nota de rodapé
- `.footnoteN` = referencia o `id` em footnotes.js (sem "footnote" prefix duplicado)

**Exemplo Completo:**
```markdown
A colonialidade seguiu existindo[estruturalmente na sociedade]{.footnote .footnote3} mesmo após a independência.
```

Que referencia em footnotes.js:
```javascript
{
    "id": "footnote3",
    "text": "O neodesenvolvimentismo é comumente utilizado para descrever..."
}
```

### 4.3 Renderização Automática

O componente Paginar Web Component:
- Lê `bookSettings.footnotes` (do `.settings/index.js`)
- Identifica notas no texto marcadas com `.footnote`
- Renderiza como nota de rodapé ou popup (dependendo do dispositivo)
- Não requer código adicional no Markdown

---

## 5. Sistema de Referências Bibliográficas

### 5.1 Arquivo de Configuração: `.settings/references.js`

**Estrutura:**
```javascript
export default [
    {
        "cit": "AUTOR, 2020",
        "ref": "AUTOR, Nome. <strong>Título do Livro</strong>. Cidade: Editora, 2020."
    },
    {
        "cit": "SILVA et al., 2019",
        "ref": "SILVA, João; SANTOS, Maria. <strong>Artigo sobre Tema</strong>. Revista X, v. 10, n. 2, p. 100-120, 2019."
    },
    {
        "cit": "GAMA, 2019",
        "ref": "GAMA, Mara. <strong>As três rotas que trouxeram a Bauhaus ao Brasil</strong>. Folha de São Paulo, 2019."
    }
]
```

**Regras:**
- `cit` = Citação abreviada (ex: "AUTOR, YYYY" ou "SMITH et al., 2020")
- `ref` = Referência completa em HTML
- Pode contar com `<strong>`, `<em>`, `<a href>` para formatação
- Se não há referências, arquivo pode estar vazio: `export default []`

### 5.2 Marcação no Markdown

Use o `cit` entre parênteses inline:

```markdown
Segundo diferentes autores (ESCOBAR, 2016), a modernidade é inseparável da colonialidade.
```

**Sintaxe:** `(AUTOR, YYYY)`

- O texto entre parênteses deve ser exatamente o campo `cit` em references.js
- Não requer marcação especial de classe
- Paginar linkará automaticamente à referência

**Exemplo Prático:**

Markdown:
```markdown
Escobar (ESCOBAR, 2016) aponta que as estruturas de poder...
```

references.js:
```javascript
{
    "cit": "ESCOBAR, 2016",
    "ref": "ESCOBAR, Arturo. <strong>Autonomía y Diseño: la realización del comunal</strong>, Colômbia: Editorial Universidad del Cauca, 2016"
}
```

### 5.3 Página de Referências

Crie um capítulo dedicado (geralmente o último):

**Arquivo:** `N.referencias.md`

```markdown
---
title: 'Título do Livro - Referências'
description: 'Referências bibliográficas'
layout: 'default'
navigation:
  title: 'Referências'
---

## REFERÊNCIAS

ACOSTA, Alberto. Extrativismo e neoextrativismo: Duas faces da mesma maldição...

ANI, Marimba. **Yurugu: An Afrikan-Centered Critique of European Cultural Thought and Behaviour**. 1. ed. Trenton: Africa World Press, 1994.

... (lista de todas as referências em HTML formatado)
```

Você pode copiar as referências de `references.js` para este arquivo manualmente ou via script.

---

## 6. Arquivos de Configuração - Template Padrão

### 6.1 `.settings/config.js` - OBRIGATÓRIO

**Template Base:**
```javascript
import references from './references.js'
import footnotes from './footnotes.js'
import fontOptions from './fonts.js'
import theme from './theme.js'

export default {
  // Metadados do livro (PERSONALIZE)
  metadata: {
    isbn: '{ISBN}',                    // Substitua pelo ISBN real
    title: '{TÍTULO COMPLETO}',        // Título do livro
    subtitle: '{SUBTÍTULO}',           // Opcional
    author: '{NOME DO AUTOR}',         // Autor
    publisher: 'Editora Sabiá',        // Não mude
    year: {ANO},                       // Ex: 2024
    language: '{CÓDIGO IDIOMA}'        // 'pt-br', 'en', 'es', etc
  },

  // Configurações do leitor Paginar
  reader: {
    fontSize: 19,                       // Tamanho padrão (em px)
    defaultTextFont: 'Libre Franklin',  // Fonte principal padrão
    defaultBaseFont: 'Inter',           // Fonte alternativa padrão
    
    preferences: {
      columnsMode: 'auto',              // 'single', 'double', 'auto'
      theme: 'light',                   // 'light', 'dark', 'sepia'
      lineHeight: 1.6,                  // Altura de linha
      pageMargin: 'medium'              // 'small', 'medium', 'large'
    }
  },

  // Importa fontes de fonts.js
  fontsOptions: fontOptions,

  // Importa tema de theme.js
  theme: theme,

  // Conteúdo do livro
  content: {
    references: references,             // De references.js
    footnotes: footnotes,               // De footnotes.js
    generateSummary: true,              // Gerar índice automaticamente
    customOrder: null                   // null = usar ordem numérica dos arquivos
  },

  // Recursos opcionais para Paginar
  features: {
    enableBookmarks: true,              // Permitir marcadores
    enableNotes: true,                  // Permitir notas de usuário
    enableSearch: true,                 // Busca no livro
    enablePrint: true,                  // Imprimir
    enableShare: false                  // Compartilhamento social
  }
}
```

**O que Personalizar:**
- `metadata.isbn` ← ISBN do livro
- `metadata.title` ← Título exato
- `metadata.author` ← Nome do autor
- `metadata.year` ← Ano de publicação
- `metadata.language` ← Código de idioma
- `reader.fontSize` ← Tamanho padrão (típico: 16-20)
- `reader.defaultTextFont` ← Fonte principal
- `features.*` ← Ativar/desativar recursos

**O que NÃO Mude:**
- `publisher` (sempre "Editora Sabiá")
- Estrutura de imports
- Nomes das propriedades

### 6.2 `.settings/fonts.js` - OBRIGATÓRIO

**Template Base - Mínimo:**
```javascript
// Mínimo: apenas fonte padrão
export default [
    {
        label: 'Padrão',
        name: 'var(--font-sans)',
        link: null,
        defaultTextFont: true,
        defaultBaseFont: false
    }
]
```

**Template Completo - Com Opções:**
```javascript
export default [
    {
        label: 'Padrão',
        name: 'var(--font-sans)',
        link: null,
        defaultTextFont: true,
        defaultBaseFont: false
    },
    {
        label: 'Faune',
        name: 'Faune',
        link: '/fonts/faune.css',  // ou URL do Google Fonts
        defaultTextFont: false,
        defaultBaseFont: false
    },
    {
        label: 'OpenDyslexic (acessibilidade)',
        name: 'OpenDyslexic',
        link: 'https://fonts.googleapis.com/css2?family=OpenDyslexic',
        defaultTextFont: false,
        defaultBaseFont: false
    }
]
```

**Campos:**
- `label`: Texto exibido no menu de fontes
- `name`: Nome CSS da fonte
- `link`: URL do CSS/font ou null para fonte do sistema
- `defaultTextFont`: true = fonte padrão para corpo de texto
- `defaultBaseFont`: true = fonte padrão alternativa

**Dica:** Sempre deixe uma fonte com `defaultTextFont: true`

### 6.3 `.settings/theme.js` - OBRIGATÓRIO

**Template Base - Mínimo:**
```javascript
export default {
    name: '{slug-do-livro}',           // Ex: 'design-decolonial'
    version: '1.0.0',
    
    cssVariables: {},                   // Deixe vazio se não usar
    
    componentCSS: `
        /* Estilos CSS aqui */
        main#rootComponent {
            transition: background-color 200ms linear;
        }
    `
}
```

**Template Completo - Com Cores e Imagens:**
```javascript
export default {
    name: 'design-decolonial',
    version: '1.0.0',
    
    // CSS Variables (opcional)
    cssVariables: {
        '--book-primary-color': 'rgb(24, 64, 151)',
        '--book-accent-color': '#fff',
        '--book-text-color': '#333'
    },
    
    // CSS embarcado para Paginar Shadow DOM
    componentCSS: `
        :root {
            --book-primary-color: rgb(24, 64, 151);
            --book-accent-color: #fff;
        }
        
        main#rootComponent {
            transition: background-color 200ms linear;
        }
        
        .capa.columns-double,
        .capa.columns-single {
            background-color: var(--book-primary-color);
            background-image: url(https://cdn.example.com/cover.jpg);
            background-size: cover;
        }
        
        #rootComponent.capa .viewer-nav {
            color: var(--book-accent-color) !important;
        }
    `
}
```

**Por que Embarcado?** O Paginar é um Web Component com Shadow DOM isolado. CSS externo não funciona. O CSS precisa estar aqui.

### 6.4 `.settings/index.js` - OBRIGATÓRIO (Boilerplate)

**Use este template sem modificações:**
```javascript
import config from './config.js'
import references from './references.js'
import footnotes from './footnotes.js'

// Utility function (não mexa aqui)
function generateLegacySettings(config) {
    const cssVariables = Object.entries(config.theme.cssVariables || {})
        .map(([key, value]) => `${key}: ${value};`)
        .join('\n  ')

    const cssString = `
        :root {
            ${cssVariables}
        }
        ${config.theme.componentCSS}
    `.trim()

    const legacyReferences = (config.content.references || []).map(ref => ({
        cit: ref.cit,
        ref: ref.ref
    }))

    const legacyFootnotes = config.content.footnotes || []

    return {
        fontSize: config.reader.fontSize,
        fontsOptions: config.fontsOptions || [],
        cssString: cssString,
        references: legacyReferences,
        footnotes: legacyFootnotes,
        _metadata: config.metadata,
        _theme: config.theme.name
    }
}

export default generateLegacySettings(config)
```

**IMPORTANTE:** Este arquivo é quase sempre boilerplate. Geralmente não precisa ser modificado além de copiar este template.

---

## 7. Componentes Vue - Componentes Disponíveis

### 7.1 Lista de Componentes (em `components/content/`)

| Componente | Sintaxe | Uso | Notas |
|-----------|---------|-----|-------|
| **PageFull** | `::PageFull{...}` | Página inteira ocupando espaço completo | Aceita classes Tailwind |
| **PageBreak** | `:PageBreak` | Quebra de página | Sem conteúdo |
| **SchemeFull** | `::SchemeFull{...}` | Esquema/diagrama em página inteira | Para SVG/imagens grandes |
| **SchemeDiagrams** | `::SchemeDiagrams{...}` | Diagrama em coluna | Menor que SchemeFull |
| **ImageFull** | `::ImageFull{...}` | Imagem em página inteira | Para fotos grandes |
| **ImageRegular** | `::ImageRegular{...}` | Imagem no fluxo de texto | Tamanho normal |
| **ImageSignature** | `::ImageSignature{...}` | Assinatura/logo | Pequeno |
| **TimeLine** | `::TimeLine{...}` | Linha do tempo | Para eventos cronológicos |
| **TextWrapper** | `::TextWrapper{...}` | Wrapper de texto simples | Usa slot padrão |

### 7.2 Exemplos de Uso

**Página Inteira com Texto:**
```mdc
::PageFull{.flex .flex-col .justify-center}

# Título Grande

## Subtítulo

Parágrafo de conteúdo normal...

::
```

**Imagem em Página Inteira:**
```mdc
::ImageFull
![Descrição](​/9786599492907/images/figura-importante.jpg)
::
```

**Quebra de Página:**
```mdc
:PageBreak
```

**Esquema com Tailwind:**
```mdc
::SchemeFull{.bg-gray-100 .p-8}
<svg>...</svg>
::
```

### 7.3 Classes Tailwind Comuns

Use estas classes com componentes:

```mdc
::PageFull{.flex .flex-col .justify-center .items-center .gap-8}
Conteúdo centralizado
::
```

Classes úteis:
- `.flex` `.flex-col` `.flex-row` = Flexbox
- `.justify-center` `.items-center` = Alinhamento
- `.gap-4` `.gap-8` = Espaçamento
- `.bg-gray-100` = Cores de fundo
- `.p-4` `.px-8` `.py-4` = Padding
- `.text-center` `.text-right` `.text-left` = Alinhamento de texto

---

## 8. Assets Públicos (Imagens, Esquemas, Tabelas)

### 8.1 Estrutura de Diretório

Localização: `public/{ISBN}/`

```
public/{ISBN}/
├── css/
│   └── base.css              # CSS customizado (opcional)
├── images/
│   ├── figura-1.jpg
│   ├── figura-2.png
│   └── ...
├── schemes/
│   ├── diagrama-1.svg
│   └── ...
├── tables/
│   ├── tabela-1.html
│   └── ...
└── texts/
    ├── cap-1-titulo.svg
    └── ...
```

### 8.2 Padrão de URLs

**No Markdown, use sempre paths absolutos começando com `/`:**

```markdown
![Descrição da imagem](​/9786599492907/images/figura-1.jpg)
<img src="/9786599492907/texts/cap-1.svg" alt="Título" />
```

**Nunca use paths relativos** como `./images/figura.jpg` ou `images/figura.jpg`

### 8.3 Tipos de Assets

| Tipo | Extensões | Localização | Uso |
|------|-----------|------------|-----|
| Imagens | `.jpg`, `.png`, `.webp` | `images/` | Fotos, ilustrações |
| Esquemas | `.svg`, `.png` | `schemes/` | Diagramas, mapas |
| Tabelas | `.html`, `.png` | `tables/` | Dados tabulares |
| Textos/Títulos | `.svg` | `texts/` | Títulos em SVG, logos |

### 8.4 Otimização de Assets

- **Imagens:** Comprima JPGs com `tinypng.com` ou similares
- **SVGs:** Use SVGs vetoriais para esquemas (melhor qualidade em zoom)
- **Nomes:** Use nomes descritivos em lowercase com hífens (`figura-capitulo-1.jpg`)
- **Tamanho:** Imagens devem ser <= 2MB cada

---

## 9. Roteamento e Renderização

### 9.1 Estrutura de Rota

Padrão: `/{ISBN}/{slug}`

Exemplos:
- `/9786599492907/cover` → Renderiza `content/9786599492907/0.cover.md`
- `/9786599492907/estudos-decoloniais` → Renderiza `content/9786599492907/4.estudos-decoloniais.md`
- `/9786599492907/referencias` → Renderiza `content/9786599492907/8.referencias.md`

### 9.2 Componente de Rota

Arquivo: `pages/[isbn]/[...slug].vue`

Responsabilidades:
1. Lê o ISBN da URL
2. Carrega settings específicos do ISBN
3. Consulta todos os arquivos de conteúdo deste ISBN
4. Constrói navegação/índice do livro
5. Renderiza o documento Markdown via `<ContentRenderer>`
6. Passa `bookSettings` para o componente Paginar

```javascript
const isbn = route.params.isbn
const bookSettings = book9786599492907  // Importado dinamicamente por ISBN

const { data: allContent } = await useAsyncData('all-content', 
    () => queryCollection('content').all()
)

const bookPages = computed(() => {
    return (allContent.value || []).filter(item => 
        (item.path || '').startsWith(`/${isbn}/`)
    )
})
```

---

## 10. Pré-renderização Estática (SSG)

### 10.1 Configuração em `nuxt.config.js`

Para cada novo livro, adicione as rotas à configuração de pré-renderização:

```javascript
nitro: {
    prerender: {
        routes: [
            // Rotas existentes...
            
            // Novo livro (exemplo)
            '/9786599492938/cover',
            '/9786599492938/gratitudes',
            '/9786599492938/preface',
            '/9786599492938/introduction',
            '/9786599492938/part-a',
            '/9786599492938/part-b',
            '/9786599492938/part-c',
            '/9786599492938/references'
        ]
    }
}
```

**Importante:** Toda rota de livro DEVE estar listada aqui. Se faltar, a página não será pré-renderizada e será mais lenta.

---

## 11. Fluxo de Renderização Completo

```
1. Usuário acessa /9786599492907/estudos-decoloniais
   ↓
2. Nuxt router match para pages/[isbn]/[...slug].vue
   ↓
3. Componente carrega:
   - book9786599492907 settings (.settings/index.js)
   - Documento Markdown (4.estudos-decoloniais.md)
   ↓
4. Nuxt Content processa o Markdown:
   - Parseia front matter YAML
   - Converte componentes MDC em componentes Vue
   - Renderiza Markdown → HTML
   ↓
5. Componente Vue renderiza:
   - Layout padrão
   - ContentRenderer com HTML do documento
   - Paginar Web Component
   ↓
6. Paginar Web Component:
   - Injeta CSS do theme.js
   - Renderiza conteúdo em leitor de páginas
   - Liga footnotes.js às notas de rodapé no texto
   - Liga references.js às citações
   ↓
7. Usuário inteira:
   - Muda de página com navegação
   - Altera font, tamanho, tema
   - Clica em nota de rodapé
   - Clica em referência
```

---

## 12. Componente Paginar (Web Component Externo)

### 12.1 Carregamento

No `nuxt.config.js`:

```javascript
app: {
    head: {
        script: [
            {
                src: 'https://unpkg.com/paginar@0.3.4/dist/index.es.js',
                type: 'module',
                fetchpriority: 'high'
            }
        ]
    }
}
```

### 12.2 Uso no Template

```vue
<paginate-content
    :settings="bookSettings"
    :content="documentHTML"
    @navigate="handleNavigation"
/>
```

### 12.3 Responsabilidades

- Renderizar o conteúdo HTML em leitor de páginas
- Gerenciar visualização em coluna única/dupla
- Renderizar notas de rodapé
- Permitir alteração de fonte, tamanho, tema
- Gerenciar navegação entre páginas
   - Clica em nota de rodapé
   - Clica em referência
```

---

## 13. Dados de Configuração e Fluxo de Dados

### 13.1 Diagrama de Dados

```
.settings/
├── config.js (principal)
│   ├── metadata
│   ├── reader settings
│   ├── fontsOptions → fonts.js
│   ├── theme → theme.js
│   ├── references → references.js
│   └── footnotes → footnotes.js
├── index.js (consolidação)
│   └── Transforma e exporta para Paginar
└── → pages/[isbn]/[...slug].vue (importa index.js)
      └── → Paginar Web Component
```

### 13.2 Transformação de Dados

`index.js` consolida todas as configurações em um objeto único:

```javascript
function generateLegacySettings(config) {
    // Converte references para formato esperado por Paginar
    const legacyReferences = config.content.references.map(ref => ({
        cit: ref.cit,
        ref: formatReference(ref)
    }))
    
    // Converte footnotes para formato esperado
    const legacyFootnotes = config.content.footnotes
    
    // Compila CSS do theme.js
    const cssString = `
        :root { ... CSS variables ... }
        ${componentCSS}
## 14. Guia de Criação de Novo Livro - Checklist Passo a Passo

### 14.1 Passo 1: Preparar Estrutura de Diretórios

```bash
# Criar diretório do livro
mkdir content/{ISBN}
mkdir content/{ISBN}/.settings
mkdir content/{ISBN}/css
mkdir public/{ISBN}
mkdir public/{ISBN}/images
mkdir public/{ISBN}/schemes
mkdir public/{ISBN}/tables
mkdir public/{ISBN}/texts
```

### 14.2 Passo 2: Criar Arquivos de Configuração

Copie os templates dos arquivos `.settings/`:

**`.settings/config.js`** → Use o template da seção 6.1, personalize:
- isbn
- title
- author
- year
- language

**`.settings/fonts.js`** → Use o template da seção 6.2, se necessário adicione mais fontes

**`.settings/theme.js`** → Use o template da seção 6.3, customize CSS/cores

**`.settings/footnotes.js`** → `export default []` (se não houver notas, deixe vazio)

**`.settings/references.js`** → `export default []` (se não houver referências, deixe vazio)

**`.settings/index.js`** → Copie o boilerplate da seção 6.4 sem modificações

### 14.3 Passo 3: Criar Arquivos Markdown de Capítulos

**Arquivo:** `0.cover.md`
```markdown
---
title: '[TÍTULO DO LIVRO] - Capa'
description: '[Descrição breve]'
layout: 'default'
navigation:
  title: 'Capa'
---

<link rel="stylesheet" href="/{ISBN}/css/base.css">

::PageFull{.flex .flex-col .justify-center}

# TÍTULO DO LIVRO

## Subtítulo

Autor Nome

::
```

**Arquivo:** `1.[slug-primeiro-capitulo].md`
```markdown
---
title: '[TÍTULO DO LIVRO] - [Título do Capítulo]'
description: '[Descrição]'
layout: 'default'
navigation:
  title: '[Título Curto]'
---

<link rel="stylesheet" href="/{ISBN}/css/base.css">

## Título do Capítulo

Conteúdo normal aqui...
```

**Arquivo:** `N.referencias.md` (sempre último)
```markdown
---
title: '[TÍTULO DO LIVRO] - Referências'
description: 'Referências bibliográficas'
layout: 'default'
navigation:
  title: 'Referências'
---

## REFERÊNCIAS

REFERÊNCIA 1...
REFERÊNCIA 2...
```

### 14.4 Passo 4: Adicionar Assets

Coloque arquivos em:
- `public/{ISBN}/images/` → Imagens
- `public/{ISBN}/schemes/` → Diagramas/SVGs
- `public/{ISBN}/tables/` → Tabelas
- `public/{ISBN}/texts/` → Títulos em SVG

### 14.5 Passo 5: Registrar Rotas em `nuxt.config.js`

Adicione todas as rotas do novo livro:

```javascript
nitro: {
    prerender: {
        routes: [
            // ... rotas existentes ...
            '/{ISBN}/cover',
            '/{ISBN}/[slug-cap-1]',
            '/{ISBN}/[slug-cap-2]',
            '/{ISBN}/referencias'
        ]
    }
}
```

### 14.6 Passo 6: Importar Settings na Rota

Edite `pages/[isbn]/[...slug].vue` e importe o novo livro no topo:

```javascript
import book{ISBN_SEM_HÍFENS} from '../../content/{ISBN}/.settings/index.js'
```

E adicione no bloco `try-catch`:

```javascript
} else if (isbn === '{ISBN}') {
    bookSettings = book{ISBN_SEM_HÍFENS}
}
```

### 14.7 Passo 7: Testar Localmente

```bash
npm run dev
# Acesse: http://localhost:3000/{ISBN}/cover
```

### 14.8 Passo 8: Build e Deploy

```bash
npm run build
npm run preview
# Se OK: deploy
```
2. Adicione objeto ao array:
```javascript
{
    label: 'Nome da Fonte',
    name: 'FontFamily Name',
    link: 'URL do CSS da fonte',
    defaultTextFont: false,
    defaultBaseFont: false
}
```

### 16.5 Editar Capítulos

Edite diretamente os arquivos `.md`:
- Mantenha o front matter YAML intacto
- Use sintaxe MDC para componentes
- Use `[texto]{.footnote .footnoteN}` para notas
- Use `(AUTOR, YYYY)` para referências

---

## 17. Checklist de Validação para Novos Agentes/LLMs

Ao trabalhar com este livro, certifique-se:

- [ ] **Estrutura de Arquivos**: Verifiqu se a estrutura `.settings/` está completa
- [ ] **Footnotes**: Todas as notas de rodapé estão em `footnotes.js` e marcadas corretamente
- [ ] **References**: Todas as referências estão em `references.js` com `cit` e `ref`
- [ ] **Front Matter**: Cada `.md` tem YAML válido com `title`, `description`, `layout`, `navigation.title`
- [ ] **Markdown Válido**: Sem sintaxe quebrada, componentes MDC bem formados
- [ ] **Assets**: Todas as imagens/esquemas têm paths corretos (`/9786599492907/...`)
- [ ] **CSS**: `<link>` para CSS do livro está em cada arquivo
- [ ] **Roteamento**: Nome do arquivo sem número e com slug correto (ex: `prefacio.md` → `/prefacio`)
- [ ] **Paginar config**: `bookSettings` está sendo importado corretamente na rota

---

## 18. Troubleshooting Comum

| Problema | Causa | Solução |
|----------|-------|---------|
| Notas de rodapé não aparecem | ID em `footnotes.js` não corresponde ao `.footnoteN` no Markdown | Verificar IDs: `footnote1` vs `.footnote1` |
| Referências mostram apenas citação | `references.js` não tem entrada com `cit` correto | Adicionar referência em `references.js` |
| CSS não é aplicado | CSS embarcado em `theme.js` está vazio ou com seletores errados | Verificar `componentCSS` e seletores da classe Paginar |
| Imagens não carregam | Path não começa com `/` ou ISBN está errado | Usar `/9786599492907/images/...` |
| Página de navegação vazia | `navigation.title` está faltando no front matter | Adicionar em todos os `.md` |
| Componentes não renderizam | Sintaxe MDC quebrada ou componente não existe | Verificar sintaxe `::ComponentName{...}` |

---

## 19. Informações de Contato e Documentação

- **Repo**: Sabia Content Nuxt
- **Componente Paginar**: https://unpkg.com/paginar@0.3.4/
- **Nuxt Content v3**: https://content.nuxt.com/
- **Tailwind CSS**: https://tailwindcss.com/

---

## 20. Histórico de Mudanças

| Data | Versão | Mudança |
|------|--------|---------|
| 2024 | 1.0.0 | Documento inicial de especificação |

---

**Documento criado para:** Agents, LLMs e desenvolvedores futuros que trabalhem com este material  
**Objetivo:** Servir como referência técnica completa da estrutura do ebook  
**Manutenção:** Atualizar este documento sempre que a estrutura mudar
